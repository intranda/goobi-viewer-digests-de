---
description: Goobi viewer Digest f√ºr M√§rz 2021
---

# M√§rz

## Coming soon üöÄ

* Anpassungen an den **IIIF** Schnittstellen
* Erweiterungen bei den **Karten**
* Anpassungen im **Crowdsourcing**

## Entwicklungen

### Metadaten

Anwender, die viel Liebe in ihre Metadaten stecken, k√∂nnen diese jetzt noch besser pr√§sentieren. Im letzten Monat wurden hierf√ºr zwei Features entwickelt.

Zum einen k√∂nnen Metadaten jetzt auf mehrere Seiten aufgeteilt werden. Der konkrete Anwendungsfall f√ºr diese Entwicklung war der Wunsch, sehr umfassende kodikologische Daten f√ºr Handschriften separiert von den anderen bibliographischen Daten des Werkes anzuzeigen. Daf√ºr wurde die Konfigurationsdatei angepasst, die es jetzt erlaubt dynamisch Seiten f√ºr die Metadatenanzeige zu konfigurieren. Siehe dazu auch [Kapitel 1.19.1](https://docs.goobi.io/goobi-viewer-de/conf/1/19/1) in der Goobi viewer Dokumentation.

Die andere Entwicklung betrifft die Anzeige von Metadaten von Strukturelementen. Bisher wurden diese immer angezeigt, auch wenn sie eigentlich keine zus√§tzlichen relevanten Informationen enthielten. So stand dort h√§ufig nur der Titel des Strukturelementes und der war ja bereits aus dem Inhaltsverzeichnis klar. √úber einen neuen Schalter in der Konfigurationsdatei k√∂nnen nun die Metadaten markiert werden die - wenn sie die einzigen f√ºr die Anzeige w√§ren - automatisch ignoriert werden.

Wir haben in die [Updateanleitung](https://docs.goobi.io/goobi-viewer-de/devop/1#liebe-fuer-die-metadatenkonfiguration) ein paar Punkte aufgenommen die bei einem Update gepr√ºft werden sollten. Vielleicht f√§llt das Ergebnis auf den ersten Blick gar nicht auf. Aber auf den zweiten ist es logischer und √ºbersichtlicher.

![Eine zweite Seite mit eigenen Metadaten und separater URL](../.gitbook/assets/2021-3_de_kodikologische_daten.png)

### Slider

Im Goobi viewer Backend gibt es einen neuen Bereich um Slider zu definieren. Daf√ºr k√∂nnen die folgenden Quellen verwendet werden:

* **Werke** Diese werden √ºber eine Solr-Query ausgew√§hlt. Verwendet werden der Titel und der Repr√§sentant der Werke. Es wird automatisch auf das Werk verlinkt.
* **Sammlungen** Hier steht ein Multiselect Feld zur Verf√ºgung. Der √ºbersetzte Sammlungsname und der konfigurierte Repr√§sentant einer Sammlung werden hier verwendet. Es wird automatisch auf die Sammlung verlinkt.
* **CMS-Seiten** Hier k√∂nnen Kategorien ausgew√§hlt werden in denen CMS-Seiten zusammengefasst sind. Aus den Seiten wird dann die √úberschrift und ein enthaltenes Bild verwendet. Es wird automatisch auf die CMS-Seite verlinkt.
* **Medien** Erstellt einen Slider auf Basis von Bildern die im Medien Bereich hochgeladen und einer gemeinsamen Kategorie zugewiesen wurden. Verwendet werden der Titel und das Bild selbst. Sofern ein Link angegeben wurde wird auch dorthin verlinkt.

Der Goobi viewer kommt mit einer Vorauswahl von verschiedenen Slider Styles. Diese k√∂nnen im Theme visuell angepasst und alternativ auch durch eigene Konfigurationen erg√§nzt werden.

F√ºr die Verwendung des Sliders steht ein neues CMS-Template zur Verf√ºgung.

![Beispiel f&#xFC;r eine Slider-Konfiguration im Backend](../.gitbook/assets/2021-03_de_slider-backend.png)

### Widget: Aktionen

Das im letzten Monat inhaltlich √ºberarbeitete Widget "Aktionen" wurde noch einmal visuell angepasst. Aus der Community kam der Vorschlag das Widget, das administrative T√§tigkeiten erlaubt und nur Nutzern mit entsprechenden Rechten zur Verf√ºgung steht, in dem blauton des Backends einzuf√§rben. Damit w√§re eine visuelle Verbindung geschaffen und es ist auch optisch sofort ersichtlich, dass es sich hierbei um eine administrative M√∂glichkeit handelt.

Diese Idee haben wir sehr gerne aufgegriffen und umgesetzt. Hier noch einmal das alte und neue Styling nebeneinander:

![Links das alte, und rechts das neue Styling](../.gitbook/assets/2021-03_de_aktionen_vergleich.png)

### REST API

Zugriffslizenzen f√ºr Werke k√∂nnen mit IP-Adressen verkn√ºpft werden. Damit ist es M√∂glich den Zugang zum Beispiel auf einen Lesesaal einzuschr√§nken. Bei gr√∂√üeren Netzwerken mit Proxies und NAT ist es manchmal schwer herauszufinden, welche IP-Adresse der Goobi viewer eigentlich am Ende sieht um die Zugriffslizenz zu pr√ºfen. Um dieses zu vereinfachen wurde ein neuer REST Endpoint entwickelt, der genau diese IP-Adresse zur√ºck gibt. So kann von dem gew√ºnschten PC einfach die URL aufgerufen und dann f√ºr die weitere Konfiguration verwendet werden.

Der Endpoint ist in der Swagger Dokumentation aufgelistet und befindet sich unter `/users/current/`. Er  kann auf der Demoinstanz unter der folgenden URL ausprobiert werden:

* [https://viewer.goobi.io/api/v1/users/current/](https://viewer.goobi.io/api/v1/users/current/)

![Swagger Dokumentation zum neuen Endpoint](../.gitbook/assets/21-03_swagger.png)

### Sonstiges

* F√ºr angemeldete Benutzer gibt es eine Auflistung der **Merklisten** im DropDown Men√º. Die Sortierung erfolgte darin bisher in der **Reihenfolge** in der die Merklisten angelegt wurden. Sie erfolgt jetzt **absteigend nach zuletzter Bearbeitung**. Die Listen, zu denen zuletzt Werke oder Bilder hinzugef√ºgt wurden, stehen an oberster Stelle.
* Die Anzeige von **Annotationen** ist jetzt auch wieder **unter dem Bild** m√∂glich. Das Widget in der Seitenleiste wird dann ausgeblendet. Siehe dazu auch Kapitel 1.24 in der Goobi viewer Dokumentation.
* Deaktivierte Elemente werden im Backend visuell st√§rker gekennzeichnet.
* Ein sehr alter und langwieriger Bug konnte behoben werden. Wenn bei der **Authentifizierung** mit **Google** eine **wei√üe Seite** angezeigt wird, dann muss der Timeout f√ºr den Authentication Provider erh√∂ht werden, zum Beispiel auf den Wert `60000`.

## Versionsnummern

Die Versionen die in der `pom.xml` des Themes eingetragen werden m√ºssen um die in diesem Digest beschriebenen Funktionen zu erhalten lauten:

```markup
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core</artifactId>
    <version>21.03</version>
</dependency>
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core-config</artifactId>
    <version>21.03</version>
</dependency>
```

Der **Goobi viewer Indexer** hat die Versionsnummer **21.03**

Der **Goobi viewer Connector** hat die Versionsnummer **21.03**

Das **Goobi viewer Crowdsourcing Modul** hat die Versionsnummer **21.03**

