---
description: Goobi viewer Digest f√ºr Juli 2021
---

# Juli

## **C**oming soon üöÄ

* √úberarbeitung der **Kommentare**
* **Docker** Container
* **Benutzerseite** im Frontend

## Ank√ºndigung

Im August wird das Goobi viewer Team wegen verschiedener Jahresurlaube nur eingeschr√§nkt zur Verf√ºgung stehen.

{% hint style="info" %}
Wie bereits mit dem letzten Digest angek√ºndigt wird **Java 11 ab dem 1. September 2021 verpflichtend**. Sollte ein System noch nicht aktualisiert worden sein muss das sp√§testens mit einem Goobi viewer Update nach diesem Termin mit erfolgen.
{% endhint %}

## Entwicklungen

### Feedback

Das Feedback Formular wurde √ºberarbeitet und wird nun standardm√§√üig als Overlay √ºber der aktuell angezeigten Seite angezeigt. Das hat den gro√üen Vorteil, dass wenn an einer Stelle eine Nachricht verschickt wird der Nutzer nicht mehr von der Seite weggeleitet wird, sondern dort verbleibt.

Mit der visuellen √úberarbeitung gibt es aber auch funktionelle Erweiterungen. So ist es ab sofort m√∂glich eine Liste an potentiellen Empf√§ngern zu hinterlegen. Existiert mehr als ein Eintrag wird automatisch ein DropDown Men√º angezeigt in dem der gew√ºnschte Empf√§nger ausgew√§hlt werden kann.

Weiter wird eine Nachricht jetzt auch standardm√§√üig als Kopie an den Absender verschickt.

Neu ist ferner die M√∂glichkeit das Formular √ºber das Webfragment `#feedback` auf jeder Seite automatisch aufzurufen. Dadurch ist es m√∂glich die neue Funktionalit√§t auch im Men√º oder in den Werkshinweisen einfach zu nutzen.

![Das Feedback Formular wird jetzt als Overlay angezeigt.](../.gitbook/assets/21_07_de_feedback_overlay.png)

### Werkshinweise

Die Hinweise waren bisher mit einem Werksidentifier verkn√ºpft. Ab sofort k√∂nnen Werkshinweise auch f√ºr Solr-Queries angelegt werden. Damit ist es m√∂glich zum Beispiel f√ºr alle Werke einer bestimmten Sammlung oder alle Werke mit einem bestimmten Dokumenttyp einen Hinweis zu formulieren und anzuzeigen.

√úber die Neuerungen im Feedback Formular k√∂nnen Werkshinweise zum Beispiel auch das Formular √∂ffnen. Ein entsprechender Hinweis wie die Funktionalit√§t zu verwenden ist, wird in der Seitenleiste angezeigt.

![Werkshinweis der &#xFC;ber eine Solr-Query f&#xFC;r mehrere Werke gilt.](../.gitbook/assets/21_07_de_record_note_solr-query.png)

### CMS

In der Seiten√ºbersicht werden angelegte aber sich noch im Entwurf befindliche CMS-Seiten ausgegraut und mit einem entsprechenden Badge gekennzeichnet.

![DIE CMS-Seite &quot;Bilder&quot; ist als Entwurf gekennzeichnet](../.gitbook/assets/21_07_de_cms_page_draft.png)

### Monitoring

√úber die REST API steht ein neuer Monitoring Endpoint zur Verf√ºgung. Aus Sicht des Goobi viewers werden beim Aufruf die folgenden drei Funktionalit√§ten gepr√ºft:

* Anbindung zur Datenbank
* Anbindung zum Solr Suchindex
* Bildanzeige

Die JSON Ausgabe liefert f√ºr die Funktionalit√§ten entweder den Status `ok` oder den Status `error` aus. Wird dieser Endpoint in ein automatisches Monitoring System wie zum Beispiel Icinga aufgenommen und dar√ºber regelm√§√üig gepr√ºft, k√∂nnen Fehler fr√ºhzeitig entdeckt und mit Event-Handlern darauf reagiert werden.

Beispielausgabe von dem Monitoring Endpoint:

```javascript
{
	"solr": "ok",
	"database": "ok",
	"images": "ok"
}
```

### Arbeitsauftr√§ge im Hotfolder

Im April haben wir die Funktionalit√§t vorgestellt, dass die Anzahl der sich im Hotfolder befindliche Arbeitsauftr√§ge f√ºr Administratoren in der blauen Topbar angezeigt wird. Bisher wurde die Anzeige aktualisiert wenn die Seite neu geladen wurde. Ab sofort geschieht dieses ohne Zutun des Nutzers automatisch √ºber Websockets. 

### Zitierlinks

F√ºr die Bereitstellung von Zitierlinks gab es im Goobi viewer eine inzwischen zehn Jahre alte Programmlogik. Dort wurde die "PURL" zum aktuellen Werk und zur aktuellen Seite zur Verf√ºgung gestellt. Vor ungef√§hr acht Jahren wurde die Logik dahingehend erweitert, dass - wenn URNs vorhanden sind -eine URL zum internen URN-Resolver ausgegeben wird. Ansonsten weiterhin die PURL des Goobi viewers.

Die Zeit ist aber nicht stehen geblieben und deswegen war es auch dringend geboten diesen Bereich zu √ºberarbeiten. Neben PURLs und URNs gibt es ja auch DOIs und Handles und ARKs und so weiter. Au√üerdem ist es zum Beispiel in der Praxis herausfordernd die Persistenz von URN granular zu gew√§hrleisten wodurch zum Beispiel die W√ºnsche entstanden √ºber an den Werks-Identifier angeh√§ngte Fragmente auch Seiten referenzieren zu k√∂nnen.

Mit diesem Release steht eine komplett √ºberarbeitete Logik f√ºr die Anzeige von Zitierlinks zur Verf√ºgung. Der Zugang zu den Zitierlinks erfolgt weiterhin √ºber das Widget "Zitieren und Nachnutzen". Wird dort auf den Badge geklickt √∂ffnet sich ein Overlay in dem die vorhandenen Zitierlinks angezeigt und kopiert werden k√∂nnen. Ein neuer Abschnitt in der Konfigurationsdatei erlaubt dabei die Einstellung welche Felder aus dem Solr Suchindex als Zitierlink angeboten werden sollen und ob diese eventuell mit Pr√§- und Suffixen erg√§nzt werden sollen.

Der Goobi viewer kommt in der Standardkonfiguration mit Eintr√§gen f√ºr URN, URN-Granular, DOIs und Handles, die - sofern vorhanden - angezeigt werden.

![Anzeige verschiedener Zitierlinks in einem neuen Overlay](../.gitbook/assets/21_07_de_citationlinks.png)

### Verschiedenes

* Existiert f√ºr ein Werk ein Repr√§sentant verlinkt der RSS-Feed jetzt auch automatisch dorthin.
* Die Download M√∂glichkeit kann im Widget "Zitieren und Nachnutzen" jetzt global deaktiviert werden.
* Wenn in den Bibliographischen Daten Sammlungen √ºber den Parameter "hierarchicalfield" verlinkt angezeigt werden wird nun auch ein konfiguriertes Sortierfeld f√ºr eine Sammlung mit bedacht.
* Die √úbergabe eines Textes f√ºr den Footer kann jetzt abgestellt werden.
* Im Backend kann jetzt die √úbersetzung von rein lokal vorliegenden Strings gepflegt werden.

## Versionsnummern

Die Versionen die in der `pom.xml` des Themes eingetragen werden m√ºssen um die in diesem Digest beschriebenen Funktionen zu erhalten lauten:

```markup
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core</artifactId>
    <version>21.07.1</version>
</dependency>
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core-config</artifactId>
    <version>21.07</version>
</dependency>
```

Der **Goobi viewer Indexer** hat die Versionsnummer **21.07.2**

Der **Goobi viewer Connector** hat die Versionsnummer **21.07**

Das **Goobi viewer Crowdsourcing Modul** hat die Versionsnummer **21.07**

