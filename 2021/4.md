---
description: Goobi viewer Digest f√ºr April 2021
---

# April

## Coming soon üöÄ

* Erweiterungen bei den **Karten**
* Anpassungen im **Crowdsourcing**
* URL Anpassungen bei **Doppelseiten**

## Entwicklungen

### IIIF

Der Goobi viewer Core implementiert jetzt die IIIF Presentation API und die IIIF Image API in den jeweiligen 3.0er Versionen. Daf√ºr wurde in der REST API der neue Namespace /api/v2/ eingef√ºhrt. Dadurch bleiben die URLs zu den bisherigen Manifesten stabil. In der Konfigurationsdatei kann eingestellt werden welche IIIF Version der Goobi viewer in seiner eigenen Oberfl√§che standardm√§√üig ausliefert.

Zu dieser und weiterer Konfigurationsoptionen siehe auch [Kapitel 1.33.2](http://docs.goobi.io/goobi-viewer-de/conf/1/33/2) in der Goobi viewer Dokumentation.

### √úbersetzungen

Das Thema √úbersetzungen im Goobi viewer war in der Vergangenheit sehr umst√§ndlich und komplex. Urs√§chlich daf√ºr war vor allem, dass die in der Oberfl√§che angezeigten Inhalte an verschiedenen Stellen √ºbersetzt werden m√ºssen. Erschwerend kommt hinzu, dass die Inhalte oft auch aus unterschiedlichen Quellen kommen. F√ºr die √úbersetzung gab es:

* Die globalen messages mit den Werten die der Goobi viewer Core selbst mitbringt und bei jedem Update √ºberschreibt
* Die lokalen messages mit lokal √ºberschriebenen und angepassten Werten
* Das CMS-Backend mit individuellen Texten

Als potentielle Quellen f√ºr die Anzeige diente neben den drei bereits genannten Bereichen aber auch noch der Solr-Suchindex bei dem einerseits die Feldnamen selbst und andererseits Teile der Feldinhalte relevant sind. So soll in der Oberfl√§che nicht der Feldname `MD_LANGUAGE` sondern `Sprache` stehen. Au√üerdem soll bei der Sprache nicht der Feldwert `ger` auftauchen sondern die entsprechende √úbersetzung `deutsch`.

Wenn man jetzt noch bedenkt, dass die globale messages Datei gute 3.400 Eintr√§ge umfasst war schnell klar, dass das zum selber bearbeiten f√ºr Anwender viel zu kompliziert war.

Aus diesem Grund wurde im Backend ein neuer Bereich "√úbersetzungen" implementiert. Dieser Bereich kann √ºber die Konfigurationsdatei gesteuert werden um relevante beziehungsweise gew√ºnschte √úbersetzungsgruppen freizugeben. Anschlie√üend steht im Backend ein Editor zur Verf√ºgung, der es erlaubt die √úbersetzungen f√ºr die gew√ºnschten Sprachen zu pflegen.

Alle Arbeiten werden dabei konsequent in den lokalen messages Dateien gespeichert, es gibt keine Datenbank dazwischen oder √§hnliches. Ein Locking-Mechanismus verhindert, dass mehrere Administratoren gleichzeitig an den Dateien arbeiten.

Die Standardkonfiguration bringt eine Vorauswahl f√ºnf Gruppen mit, die in der Vergangenheit f√ºr die √úbersetzung oft angefragt wurden:

1. Die Namen der Solr-Felder \(Angezeigter Name eines Metadatums\) 
2. Die Werte des Solr-Feldes DC \(Sammlungsnamen\) 
3. Die Werte des Solr-Feldes DOCSTRCT\_TOP \(Publikationstypen\) 
4. Die Werte des Solr-Feldes DOCSTRCT\_SUB \(Strukturtypen\) 
5. Die E-Mailtexte der versendeten E-Mails

F√ºr weitere Informationen siehe auch [Kapitel 1.37](https://docs.goobi.io/goobi-viewer-de/conf/1/37) in der Goobi viewer Core Dokumentation und/oder hier ein paar Eindr√ºcke aus der Oberfl√§che:

![Auf dem Dashboard gibt es einen  &#xDC;berblick den Fortschritt bei &#xDC;bersetzungsgruppen](../.gitbook/assets/21.04_de_translations_dashboard.png)

![In der Sidebar steht ein neuer Bereich &quot;&#xDC;bersetzungen&quot; zur Verf&#xFC;gung](../.gitbook/assets/21.04_de_translations_overview.png)

![Bei der &#xDC;bersetzung werden unvollst&#xE4;ndige Eintr&#xE4;ge hervorgehoben](../.gitbook/assets/21.04_de_translations_entry.png)

### Zugriffsbeschr√§nkungen

Neu ist die M√∂glicheit den Zoom und den Download von Bildern √ºber eine Zugriffslizenz einzuschr√§nken. Damit ist die normale Bildanzeige zwar zug√§nglich aber die ausgelieferten Inhalte werden beschr√§nkt. Daf√ºr stehen die neuen Funktionen "Bildzoom" und "Bild-Download" f√ºr Zugriffslizenzen und Rechte zur Verf√ºgung.

In diesem Zuge wurde ein weitere Konfigurationsschalter eingef√ºhrt, der die maximale Bildbreite in Pixeln definiert bis wohin das Bild zug√§nglich gemacht werden soll. Der Standardwert sind 600px, f√ºr eine Anpassung siehe auch [Kapitel 1.7](https://docs.goobi.io/goobi-viewer-de/conf/1/7) in der Goobi viewer Core Dokumentation.

Ist die Einstellung f√ºr einen Datensatz aktiv, ist auch die Bildauslieferung √ºber die IIIF API entsprechend eingeschr√§nkt.

{% hint style="warning" %}
Bei einem Update auf die Version 21.04 m√ºssen die im Backend konfigurierten Zugriffslizenzen und Rechte gepr√ºft und die neuen Rechte explizit hinzugef√ºgt werden!
{% endhint %}

![Neue Funktionen um den Bildzoom und den Download von Bildern zu steuern.](../.gitbook/assets/21.04_de_functions.png)

### Strukturelement-Navigation

In der Vollbildansicht besteht die M√∂glichkeit zwei zus√§tzliche Navigationselemente einzublenden um zwischen definierten Strukturelementen zu navigieren. Als Anwendungsfall f√ºr die Entwicklung dient ein digitalisierter Archivbestand, wo zwischen den einzelnen Dokumenten innerhalb einer Mappe navigiert werden soll.

Siehe dazu auch [Kapitel 1.11.2](https://docs.goobi.io/goobi-viewer-de/conf/1/11/2) in der Goobi viewer Core Dokumentation.

![Navigation zwischen ausgew&#xE4;hlten Strukturelementen in der Vollbildansicht](../.gitbook/assets/21.04_de_docstructnavigation.png)

### Archivansicht

Die Bildvorschau in der Archivansicht wurde erweitert. Lagen f√ºr eine Verzeichnungseinheit bisher Digitalisate vor, wurde der Repr√§sentant angezeigt und man konnte in die Bildanzeige wechseln. Diese Funktionalit√§t wurde erweitert, so dass wenn Strukturelemente vorliegen von der ersten Hierarchieebene jeweils das erste Bild des Strukturelements als Thumbnail angezeigt wird. Bei Klick auf ein Thumbnail √∂ffnet sich das Bild in der Vollbildansicht. Bei einer Mappe mit mehreren enthaltenen einzelnen Dokumenten ist so ein schneller √úberblick √ºber den Inhalt der Mappe und das gezielte Springen zu einem gew√ºnschten Dokument m√∂glich.

![Thumbnailvorschau f&#xFC;r Strukturelemente einer Verzeichnungseinheit](../.gitbook/assets/21.04_de_archivansicht_thumbs.png)



### Arbeitsauftr√§ge im Hotfolder

In der blauen Topbar kann die Anzahl der sich im Hotfolder befindlichen Dateien / Arbeitsautr√§ge angezeigt werden. Daf√ºr wurden der Goobi viewer Indexer und der Goobi viewer Core entsprechend erweitert.

Bereits heute gibt der Goobi viewer Indexer nach einer erfolgreichen Indexierung Informationen an den Goobi viewer Core weiter. Wenn Bilder verarbeitet wurden veranlasst er zum Beispiel die Leerung des Bildcaches f√ºr das Werk oder er √ºbermittelt seine eigene Versionsnummer f√ºr die Anzeige auf dem Dashboard des Admin Backends. Neu hinzugekommen ist, dass der Goobi viewer Indexer nun auch die Anzahl der Arbeitsauftr√§ge im Hotfolder ermitteln kann und dann weiterleitet. Dieses wird dann in der blauen Topbar im Backend angezeigt. Auf diese Weise ist f√ºr Administratoren schnell ersichtlich ob und wenn ja wie viele Dateien noch in der Queue sind.

Optional kann die Topbar auch nur f√ºr Administratoren im Frontend angezeigt werden.

![Anzeige der Arbeitsauftr&#xE4;ge im Hotfolder in der Topbar im Backend](../.gitbook/assets/21.04_de_files_in_hotfolder.png)

## Versionsnummern

Die Versionen die in der `pom.xml` des Themes eingetragen werden m√ºssen um die in diesem Digest beschriebenen Funktionen zu erhalten lauten:

```markup
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core</artifactId>
    <version>21.04.3</version>
</dependency>
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core-config</artifactId>
    <version>21.04.1</version>
</dependency>
```

Der **Goobi viewer Indexer** hat die Versionsnummer **21.04**

Der **Goobi viewer Connector** hat die Versionsnummer **21.04**

Das **Goobi viewer Crowdsourcing Modul** hat die Versionsnummer **21.04**

