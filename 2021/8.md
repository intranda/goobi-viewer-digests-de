---
description: Goobi viewer Digest f√ºr August 2021
---

# August

## **C**oming soon üöÄ

* √úberarbeitung der **Kommentare**
* **Docker** Container
* **Benutzerseite** im Frontend

## Ank√ºndigung

{% hint style="warning" %}
Wie bereits mit dem letzten beiden Digests angek√ºndigt wird **Java 11 ab diesem Release verpflichtend**. Sollte ein System noch nicht aktualisiert worden sein muss das sp√§testens mit einem Goobi viewer Update erfolgen.
{% endhint %}

## Entwicklungen

### Docker

![Das GEI erm&#xF6;glicht die Bereitstellung des Goobi viewers in Docker Containern](../.gitbook/assets/gei_docker.png)

Gemeinsam mit dem Georg Eckert Institut, Leibniz-Institut f√ºr internationale Schulbuchforschung, entwickeln wir eine L√∂sung um den Goobi viewer und alle dazugeh√∂rigen Komponenten und Dienste als Docker Container zur Verf√ºgung zu stellen.

Wir sind stolz darauf mit dem August Release die ersten Dockerfiles und Preview-Container ver√∂ffentlichen zu k√∂nnen. Die Arbeiten sind noch nicht abgeschlossen, f√ºr die folgenden Komponenten k√∂nnen aber bereits Container von Docker Hub bezogen werden:

* Apache Solr \(vorkonfiguriert f√ºr den Goobi viewer\)
* Goobi viewer Indexer
* Goobi viewer Connector
* Goobi viewer Reference Theme

Das Theme bindet den Core als Abh√§ngigkeit ein, dadurch ist das Theme der eigentliche Hauptcontainer.

Im kommenden Monat werden wir noch eine zentrale docker-compose Datei ver√∂ffentlichen und eine Anleitung schreiben wie der Goobi viewer mit Docker in Betrieb genommen werden kann.

### Medien

Im CMS-Bereich wird nun auch der Upload von SVG-Dateien und MP4 Videos unterst√ºtzt. Diese k√∂nnen anschlie√üend zum Beispiel in CMS-Seiten oder auch im Slider eingebunden werden.

Video Dateien in Werken haben √ºber das zus√§tzliche Poster-Attribut ein Platzhalterbild, dass standardm√§√üig einen Play-Button anzeigt.

### Quality Friday

Wie in den letzten beiden Digests angek√ºndigt war das Goobi viewer Team im August nicht durchgehend komplett. Aus diesem Grund war es schwer gr√∂√üere Entwicklungen durchzuf√ºhren, bei denen die Arbeiten des einen auf Vorarbeiten des anderen aufbauen. Deswegen haben wir vermehrt Arbeiten durchgef√ºhrt die bei uns unter dem Begriff "Quality Friday" fallen.

Diesen gibt es bei intranda bereits seit vielen Jahren und sagt aus, dass ein Mitarbeiter 10 % seiner Arbeitszeit f√ºr Aufgaben und Entwicklungen nutzen darf, die zum Beispiel der allgemeinen Verbesserung der Software, der Dokumentation, automatischen Tests oder der Konfiguration der Entwicklungsumgebung dienen. Diese Arbeiten sind in der Regel nicht durch Entwicklungsauftr√§ge gedeckt, w√ºrden sie aber nicht gemacht, entstehen "technische Schulden" und die regul√§re Arbeit wird mit der Zeit immer schwieriger, z√§her und langwieriger.

Ausgehend von dem Spruch "Freitag ab eins macht jeder seins!" und der Berechnung, dass bei einer 40 Stunden Woche 10 % der Arbeitszeit vier Stunden, also ein halber Tag pro Woche sind, kam dann die Idee auf, den Freitag Nachmittag f√ºr diese Arbeiten zu nutzen. Dadurch wurde der Begriff "Quality Friday", kurz "QF" geboren.

Im August haben wir verschiedenste Arbeiten in diesem Kontext durchgef√ºhrt. Im Folgenden m√∂chten wir einige davon auflisten und erkl√§ren:

### Konfigurationsdatei \(QF\)

√úber die Jahre ist die zentrale Konfigurationsdatei `config_viewer.xml` immer weiter gewachsen. Mit gewachsen ist zum Beispiel auch die Art- und Weise mit der Funktionalit√§t ein oder ausgeschaltet wird. Hier ein Beispiel wie es bisher war:

```markup
<user>
    <userRegistrationEnabled>true</userRegistrationEnabled>
</user>

<reCaptcha show="false" />

<calendar>
    <enabled>true</enabled>
</calendar>

<sidebar>
    <toc>
        <visible>true</visible>
    </toc>
    <sidebarRssFeed display="true" />
    <sidebarWidgetDownloads visible="true" />
</sidebar>
```

Auch ohne tiefer in die Materie einzusteigen ist sehr schnell ersichtlich, dass verschiedenste Varianten und Begriffe existierten um immer jeweils das selbe zu tun. Nach den "Quality Friday" Arbeiten ist hier eine einheitliche Terminologie und Schreibweise zu erkennen:

```markup
<user>
    <registration enabled="true" />
</user>

<reCaptcha enabled="false" />

<calendar enabled="true" />

<sidebar>
    <toc enabled="true" />
    <sidebarRssFeed enabled="true" />
    <sidebarWidgetDownloads enabled="true" />
</sidebar>
```

Sicherlich haben wir an dieser Stelle noch Dinge √ºbersehen die uns erst in den kommenden Monaten auffallen und dann angepasst werden. Aber wir haben einen gutes Fundament gelegt. 

√Ñnderungen wie diese machen ein Update auch immer l√§nger, da die lokale Konfigurationsdatei an die ver√§nderte Standardkonfiguration angepasst und migriert werden muss. Langfristig f√ºhren sie aber zu einer deutlichen Verbesserung in vielen Arbeitsabl√§ufen: Ein Entwickler muss sich keine Gedanken mehr machen wie er einen neuen Schalter nennt, denn er kann sich an den existierenden Orientieren. Die Lernkurve ist f√ºr alle deutlich steiler, die √úbertragbarkeit von Wissen von einem Element auf das andere ist einfach gegeben und muss nicht jedes Mal nachgeschaut werden. Zu guter Letzt wird auch die Konfigurationsdatei insgesamt k√ºrzer und dadurch √ºbersichtlicher.

Wir haben auch die in der Konfigurationsdatei enthaltenen Kommentare zu einem gro√üen Teil √ºberpr√ºft und in der Art- und Weise wie Funktionalit√§t und Schalter formuliert werden homogenisiert.

### Barrierefreiheit \(QF\)

Im November 2020 haben wir im Goobi viewer die Barrierefreiheit nach WCAG 2.1 AA sichergestellt. Jetzt, ein gutes halbes Jahr sp√§ter, sind wir den Code erneut durchgegangen und haben an einigen Stellen nachjustiert. Dies betrifft vor allem den Slider und Karten.

### Sidebar \(QF\)

Wir sind alle Seiten im Goobi viewer Core durchgegangen und haben uns angeschaut wie die Sidebar aufgebaut wird. Das war √ºber die Jahre gewachsen und nicht mehr einheitlich. Wir haben sichergestellt, dass nun auf allen statischen Seiten einheitliche und sinnvolle Widgets angezeigt werden, auf einigen Seiten welche entfernt und auf anderen hinzugef√ºgt.

### XHTML \(QF\)

Die Webseiten des Goobi viewers werden in XHTML Dateien geschrieben und dort mit dem Templating Framework JSF realisiert. In den XHTML Dateien haben wir verschiedenste Dinge aufger√§umt, wie zum Beispiel die Reihenfolge von Codebl√∂cken innerhalb der Dateien an die Reihenfolge der Anzeige der Seite angeglichen, Einr√ºckungen von Code angepasst und korrigiert oder die Verwendung von sogenannten Namespaces vereinheitlicht. Typisches "Housekeeping"

### Browser Console \(QF\)

F√ºr Entwickler ist es notwendig, dass die Console in den Entwicklertools des Browsers funktioniert und √ºbersichtlich ist. Jegliche Art von Fehlern, Warnungen und √ºberfl√ºssigen Ausgaben sollten vermieden werden. Wir sind diesen Bereich noch einmal durchgegangen und haben verschiedene √Ñnderungen durchgef√ºhrt. Als erstes haben wir √ºberfl√ºssige Meldungen auskommentiert. Anschlie√üend wurden Anpassungen in Grunt f√ºr die Generierung der Goobi viewer eigenen CSS und Javascript Dateien vorgenommen um den Pfad zu den Source Maps richtig zu setzen. Am Ende haben wir noch begonnen die Verwaltung der verwendeten Javascript Bibliotheken zu √ºberarbeiten um auch hier die Sourcemaps mit zu √ºbernehmen.

### Goobi viewer Indexer

Die Art- und Weise wie der Goobi viewer die Konfigurationsdatei einlie√ü und verwaltet wurde modernisiert. Dadurch ist es jetzt nicht mehr notwendig Leerzeichen durch einen Platzhalter zu ersetzen, sondern sie k√∂nnen in regul√§ren Ausdr√ºcken ohne explizite Maskierung direkt verwendet werden.

## Versionsnummern

Die Versionen die in der `pom.xml` des Themes eingetragen werden m√ºssen um die in diesem Digest beschriebenen Funktionen zu erhalten lauten:

```markup
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core</artifactId>
    <version>21.08.1</version>
</dependency>
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core-config</artifactId>
    <version>21.08</version>
</dependency>
```

Der **Goobi viewer Indexer** hat die Versionsnummer **21.08**

Der **Goobi viewer Connector** hat die Versionsnummer **21.08.2**

Das **Goobi viewer Crowdsourcing Modul** hat die Versionsnummer **21.08**

