---
description: Goobi viewer Digest f√ºr Juni 2021
---

# Juni

## **C**oming soon üöÄ

* √úberarbeitung des **Feedback** Formulars
* Verbesserungen bei den **Zitierlinks**
* **Benutzerseite** im Frontend

## Ank√ºndigung

Bereits seit einiger Zeit verwenden wir Java 11 in der Entwicklung. Auch bei Neuinstallationen und Updates werden die installierten Systeme auf **Java 11** umgestellt. Diese Java Version wird **zum 1. September 2021 verpflichtend**. Sollte ein System noch nicht aktualisiert worden sein muss das nach diesem Termin sp√§testens mit einem Goobi viewer Update erfolgen.

In den Monaten Juli und August wird das Goobi viewer Team wegen verschiedener Jahresurlaube nur eingeschr√§nkt zur Verf√ºgung stehen.

## Entwicklungen

### Sammlungen

Schon lange gibt es im Backend die Funktionalit√§t den Sammlungsbaum zu konfigurieren. Dieser Bereich wurde komplett √ºberarbeitet und implementiert nun auch das neue Bedienkonzept. 

Wenn die Seite aufgerufen wird, wird der Sammlungsbaum so angezeigt wie er auch standardm√§√üig im Frontend zu sehen ist. √úber die Reiter ist direkt ersichtlich ob der Sammlungsbaum auch in den verf√ºgbaren Sprachen komplett √ºbersetzt ist:

![&#xDC;bersicht &#xFC;ber den Sammlungsbaum](../.gitbook/assets/21.06_de_collections_overview.png)

Ist die √úbersetzung unvollst√§ndig kann aus der Sidebar direkt der entsprechende Bereich in den √úbersetzungen betreten werden um die Eintr√§ge in den Sprachen zu komplettieren.   
Wurde mehr als ein Solr-Feld als Sammlungsfeld konfiguriert, zum Beispiel f√ºr Wissensgebiete oder √§hnliches, dann kann zwischen den einzelnen Sammlungsb√§umen gewechselt werden.

Ein Klick auf einen Sammlungsnamen √∂ffnet die Bearbeitungsansicht. Neu ist hier, dass Beschreibungen auch Formatierungen enthalten k√∂nnen. Auch die Auswahl der Bilder wurde intuitiver gestaltet. 

![Sammlungsbeschreibungen k&#xF6;nnen formatierten Text enthalten](../.gitbook/assets/21.06_de_collections_edit_top.png)

![Die Bildauswahl f&#xFC;r eine Sammlung wird intuitiver visualisiert](../.gitbook/assets/21.06_de_collections_edit_bottom.png)

### Karten

Letzten Monat haben wir tolle Entwicklungen im Bereich Karten verk√ºndet. Diesen Monat haben wir diese noch einmal ein wenig erweitert und im Rahmen der Bedienbarkeit √ºberarbeitet.

Die Karte mit den Suchtreffern oberhalb der Trefferliste und die Karte zur Facettierung in der Seitenleiste wurden zusammengelegt. Die Treffer k√∂nnen in der Seitenleiste ein- und ausgeblendet werden. Die Facettierung geschieht weiterhin in einem Vollbildoverlay:

![Treffer werden nun in der Karte in der Sidebar angezeigt](../.gitbook/assets/21.06_de_search_maps.png)

![Der Facettierte Bereich wird rot hervorgehoben](../.gitbook/assets/21.06_de_search_maps_facetting.png)

Au√üerdem wurde die Karte zur Darstellung von indexierten Bounding Boxes erweitert. Diese Bounding Boxes k√∂nnen auch im Werk angezeigt werden. Wenn zum Beispiel ein Atlas mit vielen einzelnen erfassten Karten existiert, entsteht auf diese Weise ein visuelles Inhaltsverzeichnis:

![Bounding Boxes im Werk dienen als visuelles Inhaltsverzeichnis](../.gitbook/assets/21.06_de_maps_record.png)

### Slider

Slider, die auf einer Solr-Query basieren, k√∂nnen nun auch ein Sortierfeld √ºbergeben bekommen. Damit ist es m√∂glich zum Beispiel die Neuzug√§nge in Form eines Sliders darzustellen.

Weiter wurde der CMS-Bereich erweitert, so dass f√ºr jede CMS-Seite ein Slider festgelegt werden kann.

### Reference

Im Reference-Theme wurden Anpassungen im Kopfbereich der Seite vorgenommen, so dass dieser moderner und weniger technisch wirkt. Auf der Startseite werden die Nutzer durch einen neuen Slider begr√º√üt. Die Suche f√§hrt auf der Desktop, wie auch der mobilen Variante, nach einem Klick auf das Lupensymbol auf und ist dadurch in beiden Ansichten identisch zu bedienen. W√§hrend in der Desktopansicht das Men√º minimal umgestylt wurde, √ºberlagert es in der mobilen Ansicht jetzt die komplette Seite und ist dadurch deutlich besser zu bedienen. Die Sidebar wird in der mobilen Anzeige jetzt √ºber einen permanent sichtbares Symbol unten rechts ein- und ausgeblendet.

Der Sprachumschalter wurde in der mobilen Version in das Men√º verschoben und von der Bedienbarkeit angepasst.

Alle √Ñnderungen k√∂nnen bei Interesse auch in das eigene Theme √ºbernommen werden. 

![Ein neuer Kopfbereich mit Slider auf der Startseite](../.gitbook/assets/21.06_de_start.png)

Hier ein paar Impressionen der mobilen Ansicht:

![Der Kopfbereich wurde aufger&#xE4;umt und zum Einblenden des Men&#xFC;s gibt es einen Button unten rechts](../.gitbook/assets/21.06_de_start_mobile.png)

![Anzeige der aufgeklappten Sidebar](../.gitbook/assets/21.06_de_start_mobile_sidebar.png)

![Das Men&#xFC; erstreckt sich &#xFC;ber den kompletten Bildschirm und beinhaltet die Sprachumschaltung](../.gitbook/assets/21.06_de_start_mobile_menu.png)

### Suche

Innerhalb der Facettierung wird jetzt bei der Verwendung von der `sortOrder="alphabetical_asc"` oder `sortOrder="alphabetical_desc"` jetzt auch die √ºbersetzten Labels bedacht. Vorher wurde immer nach dem internen Key-Namen sortiert. Das hat aber f√ºr den Nutzer an manchen Stellen Nachteile die nun behoben wurden. Gut zu sehen ist das exemplarisch bei der absteigenden alphabetischen Sortierung der Sprache. Auf den folgenden Screenshots ist links die Sortierung auf Deutsch fr√ºher, in der Mitte die Sortierung auf Deutsch heute, und rechts die Sortierung auf Englisch heute.

![Alphabetische Sortierung der Facetten fr&#xFC;her und jetzt](../.gitbook/assets/21.06_de+en_facetsorting.png)

### Primefaces

Der Goobi viewer hat die Abh√§ngigkeit von Primefaces entfernt. Diese Java Library stellt verschiedene Funktionen und graphische Elemente zur Verf√ºgung. Allerdings ist es schwer diese individuell zu stylen und auf die vielen verschiedenen optischen Varianten die die Goobi viewer Themes mitbringen anzupassen. Zuletzt wurde Primefaces nur noch f√ºr das automatische Vorschlagen von Suchbegriffen in der einfachen Suche verwendet. Wir konnten diese Funktionalit√§t nun durch eine alternative L√∂sung ersetzen und haben Primefaces danach komplett aus dem Goobi viewer entfernt.

Dieses ist insbesondere deswegen erw√§hnenswert,  weil wir damit die Javascript Library jQuery nicht mehr verpflichtend √ºber Primefaces beziehen m√ºssen, sondern sie selbst einbinden k√∂nnen. Dadurch k√∂nnen wir die Library auch bei Security Fixes schnell und unkompliziert aktualisieren. Das war uns vorher nicht m√∂glich, da Primefaces diese Updates nur f√ºr zahlende "Primefaces Elite" Abonnenten zur Verf√ºgung stellt wobei Primefaces Elite wiederum nicht in Open Source Anwendungen verwendet werden darf...

Gerade veraltete jQuery Versionen waren in der Vergangenheit immer wieder Teil von Security Audit Reports verschiedener Goobi viewer Installationen.

### Goobi viewer Indexer

Der Goobi viewer Indexer erkennt nun in GND Normdaten verf√ºgbare Ortskoordinaten und indexiert diese automatisch in der Form, wie der Goobi viewer diese ben√∂tigt. Anschlie√üend wird in der Sidebar des Werkes eine Karte mit einem Marker f√ºr diese Koordinaten dargestellt.

Hier ein Beispiel f√ºr einen MODS Ausdruck f√ºr einen mit einem GND Normdatensatz verkn√ºpften Ort:

```markup
<mods:placeTerm authority="gnd" authorityURI="http://d-nb.info/gnd/" type="text" valueURI="http://d-nb.info/gnd/4057392-8">Alten Stettin</mods:placeTerm>
```

### Sonstiges

* Backend: Bei den Werkshinweisen ist der Toggle zum Anzeigen oder Verstecken jetzt in der Sidebar.
* Kampagnen: Sind diese vollst√§ndig abgeschlossen wird der Teilnehmen Button jetzt ausgeblendet. Weiter wurde im Review Modus die Farbe und Benennung des Abweisen-Buttons ver√§ndert.
* Sammlungsauflistung: Die Performance von der Sammlungsauflistung wurde massiv gesteigert.

## Versionsnummern

Die Versionen die in der `pom.xml` des Themes eingetragen werden m√ºssen um die in diesem Digest beschriebenen Funktionen zu erhalten lauten:

```markup
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core</artifactId>
    <version>21.06.1</version>
</dependency>
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core-config</artifactId>
    <version>21.06.3</version>
</dependency>
```

Der **Goobi viewer Indexer** hat die Versionsnummer **21.06**

Der **Goobi viewer Connector** hat die Versionsnummer **21.06**

Das **Goobi viewer Crowdsourcing Modul** hat die Versionsnummer **21.06**

