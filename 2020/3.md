---
description: Goobi viewer Digest f√ºr den M√§rz 2020
---

# M√§rz

## Coming soon

* üîê **Shibboleth**
* \*\*\*\*üó∫ **Karten**
* \*\*\*\*üõ† **verbesserte Bedienung im Admin-Backend**

## Aktuelles

Auch im M√§rz hat sich trotz vieler Umst√§nde und Ver√§nderungen wieder einiges im Goobi viewer getan. Mehr dazu unten.

 Die Entwicklungen zur Merkliste und den individuellen IIIF Collections aus dem Januar wurden im IIIF Newsletter erw√§hnt: 

{% embed url="https://iiif.io/news/2020/03/31/newsletter/\#goobi-viewer-receives-support-for-individual-iiif-collections" %}

{% hint style="warning" %}
In der kommenden Version wird der Upload von DOC, DOCX und HTML Dateien im Backend entfernt. Mit dem Upload von PDF-Dateien steht eine bessere und verl√§sslichere Alternative zur Verf√ºgung.
{% endhint %}

## Entwicklungen

### Dublin Core Datens√§tze √ºber das Backend anlegen

Bisher hat der Goobi viewer Datens√§tze im METS/MODS, LIDO und DENKXWEB Format von externen Systemen entgegen genommen um sie zu indexieren und anzuzeigen. F√ºr kleinere Einrichtungen ist das Erstellen der Formate aber eine zus√§tzliche H√ºrde. Um diese zu verringern wurde im Goobi viewer Backend ein neues Formular hinzugef√ºgt mit dem Dublin Core Datens√§tze inklusive dazugeh√∂riger Bilder angelegt werden k√∂nnen. Daf√ºr wurde im Bereich "Administration" die neue Seite "Neuer Datensatz" hinzugef√ºgt:

![Im Backend k&#xF6;nnen neue Dublin Core Datens&#xE4;tze angelegt werden](../.gitbook/assets/2020-03_dublincore_backend_metadata.png)

![Hochgeladene Bilder werden nach Dateinamen sortiert und k&#xF6;nnen einzeln wieder gel&#xF6;scht werden.](../.gitbook/assets/2020-03_dublincore_backend_media_finished.png)

Das einzige Pflichtmetadatum ist der Titel. Als Identifier wird im Hintergrund automatisch eine UUID generiert. F√ºr Sprach- und Rechteangaben steht ein DropDown Men√º mit Werten zur Verf√ºgung. So wird k√∂nnen zum Beispiel valide ISO 639-2b Sprachcodes geschrieben werden ohne diese kennen zu m√ºssen.  Zu allen Feldern steht eine Inline-Hilfe bereit, die optional weitere Hinweise und Beschreibungen anzeigt. Nach dem Speichern werden die Daten automatisch indexiert und sind direkt sichtbar. Es stehen alle bekannten Funktionen wie die Bildanzeige, die Anzeige der Bibliographischen Daten oder die Suche zur Verf√ºgung.

Nat√ºrlich ist auch der uneingeschr√§nkte Zugriff auf die IIIF Funktionen m√∂glich. IIIF Presentation Manifeste werden automatisch generiert und die Bilder werden √ºber die IIIF Image API ausgeliefert. √úber die integrierten Kampagnen k√∂nnen die Manifeste um Annotationen angereichert und √ºber die Merklisten Funktionalit√§t k√∂nnen die Datens√§tze zu individuellen IIIF Collections zusammengefasst werden.

Der folgende Screencast zeigt alle diese Funktionen noch einmal komplett:

{% embed url="https://youtu.be/ePA9\_\_DC0hA" %}

### Bedingungen f√ºr die Anzeige von Metadaten

Der Goobi viewer unterst√ºtzt jetzt Bedingungen bei der Anzeige von Metadaten. Der Anwendungsfall der mit der Entwicklung realisiert wurde ist wie folgt: 

Eine Einrichtung digitalisiert zur Bestandserhaltung diverse Werke, die noch unter Copyright sind. Bei der inhaltlichen Erschlie√üung wird angegeben, dass diese Werke als Zugriffsbeschr√§nkung einer Moving Wall unterliegen und erst ab einem definierten Jahr angezeigt werden d√ºrfen. Zu dem Zeitpunkt der automatischen Freischaltung haben die Werke die Lizenz "Public Domain Mark". Diese ist auch bereits in den Metadaten erfasst. 

Jetzt wurde der Goobi viewer aber konfiguriert, dass die Werke die der Moving Wall unterliegen an einem dedizierten Leseplatz PC innerhalb der Einrichtung angezeigt werden d√ºrfen. Dort sollen aber keine falschen Rechteangaben stehen. Aus diesem Grund wurden im Februar bereits die Rechte f√ºr die Lizenzen erweitert, so dass der Zugriff auf die IIIF Manifeste und der Download der Metadaten eingeschr√§nkt werden kann. Mit den Bedingungen bei der Anzeige von Metadaten wird dieses Bild nun komplettiert. Es ist ab sofort m√∂glich die Anzeige des Metadatums mit der Lizenz f√ºr den Zeitraum der Moving Wall auf dem Leseplatz PC auf einen anderen Wert zu √§ndern, als bei der inhaltlichen Erschlie√üung erfasst.

Mehr dazu inklusive Beispiel in [Kapitel 2.19.1](https://docs.goobi.io/goobi-viewer-de/2/2.19/2.19.1) in der Dokumentation.

### Separatoren in der erweiterten Suche

Zur besseren Strukturierung der Werte in dem Drop Down Men√º innerhalb der erweiterten Suche ist es nun m√∂glich Separatoren zu konfigurieren.

Mehr dazu inklusive Beispiel in [Kapitel 2.17.3](https://docs.goobi.io/goobi-viewer-de/2/2.17/2.17.3) in der Dokumentation.

### LIDO Metadaten und Events in der Seitenleiste

Bisher wurden die Metadaten und Events aus LIDO Datens√§tzen unterhalb des Bildes in verschiedenen Tabs angezeigt. Zus√§tzlich gab es in der Seitenleiste das Widget "Bibliographische Daten", dass nur die Metadaten des Haupdatensatzes anzeigen konnte.

Bei LIDO Datens√§tzen entf√§llt das Widget "Bibliographische Daten" ab sofort komplett und die Anzeige der LIDO Metadaten und Events wandert in die Seitenleiste. Damit wird die Anzeige der Metadaten √ºber alle unterst√ºtzten Formate homogenisiert und r√ºckt mehr in den Fokus. Anstelle von Tabs wird nun pro Event eine eigene Box angezeigt.

![Metadaten aus LIDO Daten werden nun in der Seitenleiste angezeigt.](../.gitbook/assets/2020-03_lido_metadata_in_sidebar.png)

### CMS-Template f√ºr St√∂bern

Es existiert ein neues CMS-Template f√ºr die "St√∂bern" Funktionalit√§t. Auf der Seite selbst kann in einem DropDown Men√º das gew√ºnschte Solr Feld ausgew√§hlt werden. Dieses muss allerdings weiterhin wie in [Kapitel 2.19.8](https://docs.goobi.io/goobi-viewer-de/2/2.19/2.19.8) beschrieben auch in der lokalen Konfigurationsdatei definiert sein.

Wird die CMS-Seite einem Subtheme zugewiesen beziehen sich die ausgegeben Werte nur noch auf das Subtheme. Damit k√∂nnen Partner die sich in einer gemeinsamen Goobi viewer Instanz pr√§sentieren jedoch mit den Subthemes eigene Teilbereiche pflegen das St√∂bern nur f√ºr ihre eigenen Inhalte anbieten.

### Sonstiges

* Der integrierte **TinyMCE Editor** wurde auf die **Version 5** aktualisiert.
* Die **Bildausschnitt Teilen** Funktion steht jetzt auch in der **Vollbildanzeige** zur Verf√ºgung
* F√ºr die Verwendung des Widgets zur Anzeige von Geokoordinaten kann ein individueller **Mapbox Token** definiert werden
* **Entwickler** k√∂nnen jetzt steuern, ob CMS-Medien auch √ºber die externe IIIF Schnittstelle oder von localhost geladen werden sollen

### Goobi viewer Indexer

#### Indexierung von Dublin Core Datens√§tzen

Der Goobi viewer Indexer wurde um die M√∂glichkeit erweitert die im Backend erzeugten Dublin Core Datens√§tze zu indexieren. Ein so erzeugter Datensatz sieht zum Beispiel so aus:

```markup
<?xml version="1.0" encoding="UTF-8" ?>

<record xmlns:dc="http://purl.org/dc/elements/1.1/">
    <dc:title>Garden images</dc:title>
    <dc:description>I created these images in my garden in spring 2020.</dc:description>
    <dc:language>ger</dc:language>
    <dc:creator>Jan Vonde</dc:creator>
    <dc:identifier>4fda256e-70b3-11ea-b891-08606e6a464a</dc:identifier>
    <dc:subject>dcdublincore</dc:subject>
    <dc:date>2020</dc:date>
    <dc:rights>http://creativecommons.org/publicdomain/zero/1.0/</dc:rights>
    <dc:relation>IMG_20200322_144253.jpg</dc:relation>
    <dc:relation>IMG_20200322_144324.jpg</dc:relation>
    <dc:relation>IMG_20200322_144401.jpg</dc:relation>
</record>
```

Hierf√ºr bitte auch die [Updateanleitung](https://docs.goobi.io/goobi-viewer-de/8/8.1#goobi-viewer-indexer) beachten.

#### Aufw√§rtsvererbung von Metadaten

√úber den neuen Schalter `<addToParents>true</addToParents>` k√∂nnen Metadaten in das Hauptelement verschoben werden.

Zum Hintergrund: In einem Projekt soll pro Vorgang eine zentrale √úbersicht aller Personen die innerhalb eines Werkes mitgearbeitet haben angezeigt werden. Diese Personen sind mit ihren dedizierten Rollen auf die verschiedenen Strukturelemente verteilt. Mit dem neuen Schalter k√∂nnen die Personen in ein eigenes Indexfeld im Hauptdokument geschrieben werden und mit dem `topstructValueFallback="true"` Attribut im Core konstant in der Seitenleiste angezeigt werden.

Siehe dazu auch [Kapitel 2.19.4](https://docs.goobi.io/goobi-viewer-de/2/2.19/2.19.4) und [Kapitel 3.7.18](https://docs.goobi.io/goobi-viewer-de/3/3.7#3-7-18-parameter-addtoparents) in der Dokumentation.

#### Boolean ob Datensatz Bilder enth√§lt oder nicht

Der Goobi viewer Indexer schreibt ab der Version 4.5.0 automatisch das Feld `BOOL_IMAGEAVAILABLE`, dass einen Boolean enth√§lt der Anzeigt ob ein Datensatz Bilder hat oder nicht.

### Goobi viewer Connector

Die OBJID in den METS Headerdateien wird nun auch √ºber OAI ausgegeben.

## Versionsnummern

Die Versionen die in der `pom.xml` des Themes eingetragen werden m√ºssen um die in diesem Digest beschriebenen Funktionen zu erhalten lauten:

```markup
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core</artifactId>
    <version>4.5.0</version>
</dependency>
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core-config</artifactId>
    <version>4.5.0</version>
</dependency>
```

Der **Goobi viewer Indexer** hat die Versionsnummer **4.5.0**.

Der **Goobi viewer Connector** hat die Versionsnummer **4.5.0**.

Das **Goobi viewer Crowdsourcing Modul** hat die Versionsnummer **1.3.0**.

