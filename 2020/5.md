---
description: Goobi viewer Digest f√ºr den Mai 2020
---

# Mai

## Coming soon

* \*\*\*\*üõ† **verbesserte Bedienung im Admin-Backend**
* \*\*\*\*üíª **REST API**

## Entwicklungen

### Karten

Die im Mai vorgestellte Funktionalit√§t der Karten wird mit diesem Release erweitert. So kann ab sofort das Design der Marker f√ºr eine Karte ausgew√§hlt werden. Damit k√∂nnen unterschiedliche Typen von Karten besser visuell voneinander getrennt werden. Die Marker sind konfigurierbar und in der Standard Konfigurationsdatei sind bereits einige Beispiele vordefiniert. Siehe dazu auch [Kapitel 2.36](https://docs.goobi.io/goobi-viewer-de/2/2.36) in der Dokumentation.

![Der zu verwendende Marker kann pro Karte individuell festgelegt werden](../.gitbook/assets/2020-05_maps_overview.png)

Bei Karten, die automatisch auf Basis einer Solr-Query generiert werden, kann jetzt ausgew√§hlt werden was in dem Popup des Markers angezeigt werden soll. Zur Auswahl stehen:

* Kein Popup anzeigen
* Den Namen des angezeigten Ortes
* Den Wert des Metadatums

Diese Differenzierung ist zum Beispiel wichtig, wenn eine Karte mit Einrichtungen gezeigt werden soll, bei dem der Namen der Einrichtung angezeigt wird, und auf einer anderen Karte aber den Namen des Ortes in dem die Einrichtung steht.

![Der Inhalt des Popups kann bei automatisch generierten Karten gew&#xE4;hlt werden](../.gitbook/assets/2020-05_maps_dropdown.png)

Werden Karten in der Seitenleiste angezeigt steht im Titel des Widgets jetzt ein Icon zur Verf√ºgung um die Karte in gro√ü zu betrachten. Sie wird dabei in einem Overlay ge√∂ffnet. Das erm√∂glicht eine bessere Navigation bei vielen Werten.

![Karten in der Seitenleiste k&#xF6;nnen in eine Vollbildanzeige erweitert werden](../.gitbook/assets/2020_05-maps_sidebar.png)

![Die Anzeige im Overlay erm&#xF6;glicht bei vielen Werten eine bessere Navigation](../.gitbook/assets/2020_05-maps-overlay.png)

Die im Backend konfigurierten Karten stehen √ºber einen oEmbed Endpoint zur Verf√ºgung. Damit k√∂nnen die Karten zum Beispiel direkt in eine Wordpress Instanz eingebettet werden. Der Link zu der oEmbed URL wird im Backend in der Karten√ºbersicht angezeigt.

Wordpress hat eine eingebaute Whitelist an Seiten denen es bei oEmbed mit Rich-Inhalten vertraut. Um eine Goobi viewer Instanz hinzuzuf√ºgen gen√ºgt es in dem Theme-Editor des Themes in den der `functions.php` die gew√ºnschte Goobi viewer Instanz als oEmbed Provider bekannt zu machen. Daf√ºr kann zum Beispiel dieses Code Snippet verwendet werden:

```php
// Register custom oEmbed provider
function goobiviewer_oembed_provider() {
	wp_oembed_add_provider( 'https://viewer.goobi.io/*', 'https://viewer.goobi.io/oembed' );
}
add_action( 'init', 'goobiviewer_oembed_provider' );
```

![Im Wordpress Theme Editor kann ein neuer oEmbed Endpoint hinzugef&#xFC;gt werden](../.gitbook/assets/2020_05-wordpress-oembed-provider.png)

### Suche

Im Kontext Suche hat es verschiedene kleinere Anpassungen gegeben.

So ist die Anzahl der Treffer auf der Seite mit den Suchtreffern nun in einem DropDown Men√º ausw√§hlbar. Bisher wurde der Wert statisch in der Konfigurationsdatei gesetzt. Ab sofort kann dort eine Liste hinterlegt werden aus der der Nutzer dann w√§hlen kann. Die Standardwerte sind `10`, `25`, `50` und `100` Treffer.

Auch bei der Sortierung gibt es zwei kleine Neuerungen. Zum einen ist die standardm√§√üige Sortierung nach "Relevanz" jetzt auch so benannt und l√§sst sich nach einem Wechsel auch wieder dorthin zur√ºcksetzen. Zum anderen wird sichergestellt, dass das Feld nachdem sortiert wird auch in den angezeigten Metadaten f√ºr das Werk immer sichtbar ist. Es wird angezeigt auch wenn es in der `<searchHitMetadataList />` nicht daf√ºr konfiguriert wurde. Mit dieser √Ñnderung kann die Sortierung  viel schneller verstanden und verglichen werden.

Eher unter der Haube aber wichtig f√ºr die Wartbarkeit ist die Homogenisierung des Suchfeldes selbst. Daf√ºr gab es vier unterschiedliche Implementierungen. Diese wurden zusammengef√ºhrt und vom Styling angeglichen. Diese Komponente wird ab sofort √ºberall verwendet.

![In den Suchergebnissen kann die Anzahl der angezeigten Treffer gew&#xE4;hlt werden.](../.gitbook/assets/2020_05-hits-per-page-and-relevance.png)

### Feedback

Die im letzten Monat vorgestellte Sicherheitsmechanismus mit den Honeypot Feldern und der Sicherheitsfrage gegen SPAM Bots bei der Registrierung neuer Benutzeraccounts wurde auch in das Feedback Formular integriert. Die reCaptcha Funktionalit√§t wurde daf√ºr an dieser Stelle entfernt. Im gleichen Zuge wurden das Pool der standardm√§√üig ausgelieferten Fragen erweitert.

![Im Feedback Formular werden nun auch Sicherheitsfragen gestellt.](../.gitbook/assets/2020-05_feedback_security_question.png)

### ContentServer

Der intranda ContentServer reicht Bilder im GIF-Format nun direkt durch. Damit ist es ab sofort m√∂glich kleine Animationen im Backend hochzuladen und in CMS zu verwenden.

### Goobi viewer Indexer

Der Goobi viewer Indexer unterst√ºtzt die Interpolierung von Jahreszahlen. Siehe dazu auch [Kapitel 3.7.20](https://docs.goobi.io/goobi-viewer-de/3/3.7#3-7-20-parameter-interpolate) in der Dokumentation.

Au√üerdem wurde die Abh√§ngigkeit von Joda-Time entfernt und durch die native java.time Implementierung ersetzt.

## Versionsnummern

Die Versionen die in der `pom.xml` des Themes eingetragen werden m√ºssen um die in diesem Digest beschriebenen Funktionen zu erhalten lauten:

```markup
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core</artifactId>
    <version>4.7.0</version>
</dependency>
<dependency>
    <groupId>io.goobi.viewer</groupId>
    <artifactId>viewer-core-config</artifactId>
    <version>4.7.0</version>
</dependency>
```

Der **Goobi viewer Indexer** hat die Versionsnummer **4.7.2**.

Der **Goobi viewer Connector** hat die Versionsnummer **4.7.0**.

Das **Goobi viewer Crowdsourcing Modul** hat die Versionsnummer **1.4.0**.

